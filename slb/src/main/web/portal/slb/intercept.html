<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Request Block Rules</title>
    <script src="/static/lib/jquery/jquery-2.2.1.min.js"></script>
    <script src="/static/lib/jquery/jquery.cookie.js"></script>
    <script src="/static/lib/bootstrap/js/bootstrap.min.js"></script>
    <script src="/static/lib/angular/angular.js"></script>
    <script src="/static/lib/jquery/jquery.ba-hashchange.js"></script>
    <!--Bootstrap-->
    <link rel="stylesheet" href="/static/lib/bootstrap/css/bootstrap.css">
    <link rel="stylesheet" href="/static/lib/velonic-admin/css/bootstrap-reset.css">
    <!--Include Bootstrap-Table-->
    <script src="/static/lib/bootstrap-table/bootstrap-table.js"></script>
    <script src="/static/lib/bootstrap-table/bootstrap-table-zh-CN.js"></script>
    <script src="/static/lib/bootstrap-table/bootstrap-table-editable.js"></script>
    <script src="/static/lib/bootstrap-table/bootstrap-editable.js"></script>
    <link rel="stylesheet" href="/static/lib/bootstrap-table/bootstrap-table.css">
    <link rel="stylesheet" href="/static/lib/bootstrap-table/bootstrap-editable.css">
    <link rel="stylesheet" href="/static/lib/font-awesome-4.6.3/css/font-awesome.min.css">
    <!-- Include Bootstrap-Validator -->
    <script src="/static/lib/bootstrap-validator/bootstrap.validation.js"></script>
    <link rel="stylesheet" href="/static/lib/bootstrap-validator/bootstrap.validation.css">
    <script src="/static/lib/jquery-showloading/jquery.showLoading.js"></script>
    <!--For diff patch-->
    <script src="/static/lib/diff-match-patch/difflib.js"></script>
    <script src="/static/lib/diff-match-patch/diffview.js"></script>
    <link rel="stylesheet" href="/static/lib/diff-match-patch/diffview.css">

    <link rel="stylesheet" href="/static/css/formatter.css">
    <!--Animation css-->
    <link rel="stylesheet" href="/static/css/animate.css">
    <link href="/static/lib/velonic-admin/css/animate.css" rel="stylesheet">
    <link href="/static/lib/velonic-admin/assets/ionicon/css/ionicons.min.css" rel="stylesheet"/>
    <!-- Custom styles for this template -->
    <link href="/static/lib/velonic-admin/css/style.css" rel="stylesheet">
    <link href="/static/lib/velonic-admin/css/helper.css" rel="stylesheet">
    <!--Underscore-->
    <script src="/static/lib/underscore/underscore-min.js"></script>
    <!--<script src="/static/lib/velonic-admin/js/jquery.js"></script>-->
    <script src="/static/lib/velonic-admin/js/modernizr.min.js"></script>
    <script src="/static/lib/velonic-admin/js/pace.min.js"></script>
    <script src="/static/lib/velonic-admin/js/wow.min.js"></script>
    <script src="/static/lib/velonic-admin/js/jquery.app.js"></script>

    <link rel="stylesheet" href="/static/css/global-new.css">
    <link rel="stylesheet" href="/static/css/slb.css">
    <style type="text/css">

        .grid-container {
            background-color: #f1f4f5;
        }

        .grid-container h4 {
            margin-left: 10px;
        }

        .btn-add {
            margin-bottom: 10px;
        }

        .panel {
            background: #fbfbfb;
        }

        .desc {
            line-height: 35px;
        }

        .delete {
            line-height: 35px;
            font-size: 20px;
            cursor: pointer;
            text-decoration: none
        }

        .unit {
            line-height: 32px;
            margin-left: -10px;
        }

        .form-control {
            background-color: white;
        }

        .split-line {
            border-top: 1px solid #e7e7e7 !important;
            margin-top: 10px;
        }

        .label-tag {
            margin-right: 10px;
            cursor: pointer;
        }

        .line {
            position: relative;
            padding: 20px 0 20px;
            list-style: none;
            text-align: right;
        }

        .timeline:before {
            display: none;
        }

        .action .row {
            padding-bottom: 10px;
        }

        .rule-table thead th {
            vertical-align: middle;
        }

        .rule-table tbody tr td {
            vertical-align: middle;
        }

        .text-add {
            line-height: 35px;
        }

        .function {
            color: #b5192c;
        }

        .condition div {
            float: left;
        }

        .fa-question-circle {
            margin-left: 5px;
            cursor: pointer;
        }

        .system-link {
            font-size: 16px;
        }
    </style>
</head>
<body>
<header class="am-topbar admin-header page-head">

    <div class="am-topbar-brand ">
        <a href="/portal" class="logo-expanded">
            <span class="nav-label fa fa-road">SLB Portal</span>
        </a>
    </div>

    <div class="am-topbar-collapse">
        <button type="button" class="navbar-toggle pull-left">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <div id="top-brand" class="navbar-left pull-left hidden-xs" ng-app="brandApp" ng-controller="brandController"
             ng-cloak>

        </div>
    </div>

    <nav class="navbar-default" role="navigation">
        <ul class="nav navbar-nav hidden-xs" id="top-links" ng-app="topLinksApp" ng-controller="topLinksController"
            ng-cloak>
            <li class="dropdown" ng-class="isSelectedLink(x.url)" data-ng-repeat="x in data.members">
                <a href="{{generateTopLink(x)}}"><span ng-class="iconClass(x)"></span>{{x.name}}</a>
            </li>
        </ul>

        <ul class="nav navbar-nav navbar-right top-menu top-right-menu">
            <li class="dropdown language-menu" id="language-area" ng-app="languageApp"
                ng-controller="languageController" ng-cloak>
                <button class="btn btn-default btn-xs language-bt">语言</button>
                <select class="language-choose" ng-model="selected" ng-change="changeLanguage(selected)">
                    <option style="color: white" data-ng-repeat="lan in data.languages">{{lan}}</option>
                </select></li>
            <li class="dropdown diagnose-menu"><a class="diagnose-menu-item" data-toggle="modal"
                                                  data-target="#questionModal" data-dismiss="modal"><span><i
                    class="fa fa-comment-o"></i> <span>Feedback</span></span></a></li>

            <li class="dropdown text-center" id="user-info" ng-app="userInfoApp" ng-controller="userInfoController"
                ng-cloak>
                <a data-toggle="dropdown" class="dropdown-toggle naviList" href="#">
                    <i class="fa fa-user username"></i>
                    <span class="username">{{query.user}} </span> <span class="caret"></span>
                </a>
                <ul class="dropdown-menu pro-menu fadeInUp animated user-ops-div" tabindex="5003"
                    style="overflow: hidden; outline: none;">
                    <li><a href="/portal/user#?env={{env}}"><span>&nbsp;{{resource['userinfo']['home']}}</span></a></li>
                    <li ng-show="showSuperAdmin()"><a href="/portal/backend/users#?env={{env}}"><span>&nbsp;{{resource['userinfo']['auth']}}</span></a>
                    </li>
                    <li><a href="/api/auth/user/logout"><span>&nbsp;{{resource['userinfo']['logout']}}</span></a></li>
                </ul>
            </li>
        </ul>
    </nav>
</header>

<aside class="left-panel " style="overflow: hidden; outline: none;">
    <nav id="header-area" ng-controller="headerInfoController" class="navigation" ng-cloak>
        <ul class="list-unstyled">
            <li class=""><a href="{{generateLink('basic')}}"><i
                    class="ion-ios7-speedometer"></i>
                <span class="nav-label">{{resource["navs"]["navs_basic"]}}</span></a></li>

            <li class=""><a href="{{generateLink('rule')}}"><i class="fa fa-pencil-square-o"></i> <span
                    class="nav-label">{{resource["navs"]["navs_rule"]}}</span></a>
            </li>
            <li class="active"><a href="{{generateLink('intercept')}}"><i class="fa fa-shirtsinbulk"></i> <span
                    class="nav-label">{{resource["navs"]["navs_intercept"]}}</span></a>
            </li>
            <li class=""><a href="{{generateLink('log')}}"><i class="ion-settings"></i> <span
                    class="nav-label">{{resource["navs"]["navs_log"]}}</span></a>
            </li>

            <li class=""><a href="{{generateLink('conf')}}"><i class="fa fa-file-code-o"></i> <span
                    class="nav-label">{{resource["navs"]["navs_conf"]}}</span></a>
            </li>
        </ul>
    </nav>
</aside>
<section class="content">
    <div class="wraper container-fluid">
        <!--Breadcrumb Area-->
        <div class="row breadcrumb-container">
            <div class="">
                <div class="pull-left" id="breadcrumb-area" ng-app="breadCrumbApp"
                     ng-controller="breadCrumbController" ng-cloak>
                    <ul class="breadcrumb">
                        <li>
                            <i class="icon-home"></i>
                            {{resource['bread']['home']}}
                        </li>
                        <li ng-repeat="x in breadlist" ng-cloak>
                            {{x}}
                        </li>
                    </ul>
                </div>
                <div class="summary-area" id="summary-area" ng-app="summaryInfoApp"
                     ng-controller="summaryController"
                     ng-cloak>
                    <div class="page-title">
                        <div>
                            <div angucomplete-alt id="targetSelector" class="pull-right target-selector"
                                 placeholder="{{target.name}}"
                                 pause="100"
                                 ng-click="clickTarget()"
                                 selected-object="selectTarget"
                                 remote-url="{{remoteUrl()}}"
                                 remote-url-request-formatter="cacheRequestFn"
                                 search-fields="id,name,pinyin"
                                 title-field="id,name"
                                 minlength="0"
                                 match-class="highlight"
                                 input-class="form-control form-control-small">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="wraper info-container" id="operation-log-area" ng-app="operationLogApp"
             ng-controller="operationLogController" ng-cloak>

            <div class="row status-row">
                <div class="col-md-12">
                    <div class="pull-right">
                        <h4 ng-class="getStatusClass()" class="pull-right">
                            {{getStatusText()}}
                        </h4>
                    </div>
                </div>
            </div>

            <div class=" panel panel-default">
                <div class="panel-body">
                    <div>
                        <div class="row">
                            <div class="col-md-10 text-add fa fa-info">
                                {{resource["intercept"]["intercept_operationLogApp_detail_target"]}}<b>{{pagerules.length}}</b>
                                {{resource["intercept"]["intercept_operationLogApp_detail_count"]}}.
                            </div>
                            <div class="col-md-2">
                                <button ng-click="createNewRule()" ng-show="showNewRuleBt()"
                                        class="btn btn btn-info pull-right btn-add">
                                    <i class="fa fa-plus"></i>{{resource["intercept"]["intercept_operationLogApp_newintercept"]}}
                                </button>
                            </div>
                        </div>

                    </div>
                    <table class="table table-bordered rule-table">
                        <thead>
                        <tr>
                            <th style="width: 1%;">#</th>
                            <th>{{resource["intercept"]["intercept_operationLogApp_conditiontext"]}}</th>
                            <th style="text-align: left;width: 20%">
                                {{resource["intercept"]["intercept_operationLogApp_conditiontype"]}}
                            </th>
                            <th style="text-align: left">
                                {{resource["intercept"]["intercept_operationLogApp_conditionresult"]}}
                            </th>
                            <th style="width: 20%;text-align: center">
                                {{resource["intercept"]["intercept_operationLogApp_operation"]}}
                            </th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr data-ng-repeat="rule in pagerules">
                            <td>
                                {{$index+1}}
                            </td>
                            <td ng-bind-html="translateCondition(rule)">
                            </td>
                            <td ng-bind-html="translateActionType(rule)">
                            </td>
                            <td style="text-align: left" ng-bind-html="translateAction(rule)">
                            </td>
                            <td style="text-align: center;vertical-align: middle">
                                <button ng-click="moveUp($index, rule)" type="btn btn-sm" class="btn-info"><i
                                        class="fa fa-arrow-up">{{resource["intercept"]["intercept_operationLogApp_moveup"]}}</i>
                                </button>
                                <button ng-click="moveDown($index, rule)" type="btn btn-sm" class="btn-info"><i
                                        class="fa fa-arrow-down">{{resource["intercept"]["intercept_operationLogApp_movedown"]}}</i>
                                </button>
                                <button ng-click="editRule($index, rule)" type="btn btn-sm" class="btn-info"><i
                                        class="fa fa-edit">{{resource["intercept"]["intercept_operationLogApp_edit"]}}</i>
                                </button>
                                <button ng-click="deleteRule($index, rule)" type="btn btn-sm btn-danger"
                                        class="btn-danger"><i
                                        class="fa fa-times">{{resource["intercept"]["intercept_operationLogApp_delete"]}}</i>
                                </button>
                            </td>
                        </tr>
                        <tr ng-show="pagerules.length==0">
                            <td colspan="5" style="text-align: center;vertical-align: middle;"><i class="fa fa-warning">{{resource["intercept"]["intercept_operationLogApp_norule"]}}</i>
                            </td>
                        </tr>
                        </tbody>
                    </table>

                    <div class="row" style="margin-top: 20px" ng-show="pagerules && pagerules.length>0">
                        <div class="col-md-10">

                        </div>
                        <div class="col-md-2">
                            <div class="pull-right" style="margin-left: 15px;">
                                <div class="system-link">
                                    <a class="dashboard" target="_blank"
                                       href="/portal/slb/traffic#?env={{env}}&slbId={{query.slbId}}&trafficType=请求数&startTime={{query.startTime}}">{{resource["intercept"]["intercept_operationLogApp_monitorall"]}}</a>
                                </div>

                                <div class="system-link">
                                    <a class="fa fa-shirtsinbulk" target="_blank"
                                       href="/portal/slb/traffic#?env={{env}}&slbId={{query.slbId}}&trafficType=被拦截请求&startTime={{query.startTime}}">{{resource["intercept"]["intercept_operationLogApp_monitorblock"]}}</a>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <div class="row save-buttons">
                <div class="col-md-9">
                    <div ng-show="showChangeRule()"
                         class="status-red pull-right">
                        您还没有配置当前SLB的权限，请<a style="font-weight: bold" ng-click="getAuthLink()">
                        点此</a>申请。
                    </div>
                </div>

                <div class="col-md-3">
                    <a class="btn btn-info pull-right" role="button"
                       ng-click="saveSettings()"
                       ng-disabled="disableSaving() || !showNewRuleBt()"><span
                            style="margin-left: 5px" class="fa fa-check">{{resource["intercept"]["save"]}}</span></a>
                    <a class="btn btn-info pull-right" style="margin-right: 10px" role="button"
                       ng-show="showActivateBt() && canActivateRule()"
                       ng-click="activateRule()">
                        <i class="fa fa-hand-o-right">{{resource["intercept"]["activate"]}}</i>
                    </a>
                </div>
            </div>

            <div class="modals">
                <div id="activateGroupModal" class="modal fade" role="dialog" aria-hidden="true">
                    <div class="span12 modal-dialog fileDiffMainContainer">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h1 class='fileViewHead' ng-class="activateGroupTitleClass()">
                                {{confirmActivateText}}</h1>
                        </div>

                        <form id='fileDiffForm'>
                            <div id="diffOutput"></div>
                            <div class="btnDiv">
                                <button class="btn confirm-bt btn-info" data-toggle="modal"
                                        data-target="#confirmActivateGroup" data-dismiss="modal"
                                        ng-show="activateBtShow()">
                                    激活生效
                                </button>

                                <span ng-show="!activateBtShow()" class="status-red">
                                    您当前没有激活权限，请<a ng-click="applyGroupUpdateRequest()">点此</a>申请
                                </span>
                                <button class="btn btn-warning" data-dismiss="modal">取消</button>
                            </div>
                        </form>
                    </div>
                </div>

                <div class="modal fade" id="confirmActivateGroup" role="dialog">
                    <div class="modal-dialog">
                        <!-- Modal content-->
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title">再次确认是否要激活</h4>
                            </div>
                            <div class="modal-body">
                                <span class="warning-important">激活Group会使Group的变动生效，生效后对Group的流量产生影响。请谨慎激活!</span>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-info" ng-click="activateGroup()"
                                        data-dismiss="modal">确认激活
                                </button>
                                <button type="button" class="btn btn-warning" data-dismiss="modal">取消</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal fade" id="saveSettingsModel" role="dialog">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title">{{resource['intercept']['operation_confirm']['title']}}</h4>
                            </div>
                            <div class="modal-body">
                                <div ng-show="showSuccessMsg()" class="status-green">
                                    {{resource['intercept']['operation_confirm']['success']}} <i class="fa fa-check" style="padding-left: 10px"></i>
                                </div>

                                <div ng-show="!showSuccessMsg()"
                                     class="status-red">
                                    {{resource['intercept']['operation_confirm']['fail']}}<i class="fa fa-times" style="padding-left: 10px"></i>. {{resource['intercept']['operation_confirm']['reason']}}:
                                    <div ng-bind-html="getErrorMsg()"></div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button id="closeSaveBt" type="button" class="btn btn-info" ng-click="reloadPage()"
                                        data-dismiss="modal">{{resource['intercept']['operation_confirm']['close']}}
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal fade" id="newRuleModel" role="dialog">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title">
                                    {{resource['intercept']['intercept_operationLogApp_new']['title']}}</h4>
                            </div>
                            <div class="modal-body" style="margin-bottom: -20px">
                                <div class="panel panel-default ">

                                    <div class="panel-body">
                                        <form name="myForm" role="form" class="form-horizontal"
                                              style="margin-top: -15px">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="btn-group pull-right">
                                                        <button type="button"
                                                                class="btn btn-info btn-sm dropdown-toggle "
                                                                data-toggle="dropdown" aria-expanded="true"><i
                                                                class="fa fa-plus"></i>{{resource['intercept']['intercept_operationLogApp_new']['new']}}
                                                        </button>
                                                        <ul class="dropdown-menu" role="menu">
                                                            <li>
                                                                <a ng-click="newConditionClick('header')">{{resource['intercept']['intercept_operationLogApp_new']['header']}}</a>
                                                            </li>
                                                            <li><a ng-click="newConditionClick('countheader')">{{resource['intercept']['intercept_operationLogApp_new']['headercount']}}</a>
                                                            </li>
                                                            <li class="divider"></li>
                                                            <li>
                                                                <a ng-click="newConditionClick('cookie')">{{resource['intercept']['intercept_operationLogApp_new']['cookie']}}</a>
                                                            </li>
                                                            <li><a ng-click="newConditionClick('countcookie')">{{resource['intercept']['intercept_operationLogApp_new']['cookiecount']}}</a>
                                                            </li>
                                                            <li class="divider"></li>
                                                            <li>
                                                                <a ng-click="newConditionClick('uri')">{{resource['intercept']['intercept_operationLogApp_new']['uri']}}</a>
                                                            </li>
                                                            <li>
                                                                <a ng-click="newConditionClick('url')"
                                                                   ng-bind-html="resource['intercept']['intercept_operationLogApp_new']['uriparam']"></a>
                                                            </li>
                                                            <li class="divider"></li>
                                                            <li>
                                                                <a ng-click="newConditionClick('method')">{{resource['intercept']['intercept_operationLogApp_new']['method']}}</a>
                                                            </li>
                                                            <li class="divider"></li>
                                                            <li>
                                                                <a ng-click="newConditionClick('arg')">{{resource['intercept']['intercept_operationLogApp_new']['param']}}</a>
                                                            </li>
                                                            <li class="divider"></li>
                                                            <li>
                                                                <a ng-click="newConditionClick('cip')">{{resource['intercept']['intercept_operationLogApp_new']['ip']}}</a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row" style="padding-top: 10px"
                                                 data-ng-repeat="composit in condition.composit['header']">
                                                <div class="col-md-1">
                                                    <span class="desc">Header<i ng-click="getHelpLink('header')"
                                                                                class="fa fa-question-circle"></i></span>
                                                </div>
                                                <div class="col-md-2">
                                                    <div class="input-group">
                                                        <span class="input-group-addon">{{resource['intercept']['intercept_operationLogApp_new']['label_key']}}</span>
                                                        <input type="text" name="headerkey"
                                                               class="form-control" placeholder=""
                                                               data-ng-model="composit['key']"
                                                               required>
                                                    </div>
                                                </div>
                                                <div class="col-md-2">
                                                    <select class="form-control"
                                                            ng-change="changeFunction(composit,'value')"
                                                            data-ng-model="composit.function">
                                                        <option value="=" selected>=</option>
                                                        <option value="!=">!=</option>
                                                        <option value="~">
                                                            {{resource['intercept']['intercept_operationLogApp_new']["reg-equal"]}}
                                                        </option>
                                                        <option value="~*">
                                                            {{resource['intercept']['intercept_operationLogApp_new']["reg-equal-case-insensitive"]}}
                                                        </option>
                                                        <option value="!~">
                                                            {{resource['intercept']['intercept_operationLogApp_new']["reg-not-equal"]}}
                                                        </option>
                                                        <option value="!~*">
                                                            {{resource['intercept']['intercept_operationLogApp_new']["reg-not-equal-case-insensitive"]}}
                                                        </option>
                                                    </select>
                                                </div>

                                                <div class="col-md-4">
                                                    <div class="input-group" ng-show="composit['value']!='nil'">
                                                        <span class="input-group-addon">{{resource['intercept']['intercept_operationLogApp_new']['label_value']}}</span>
                                                        <input type="text" name="headervalue"
                                                               class="form-control" placeholder=""
                                                               data-ng-model="composit['value']"
                                                               required>
                                                    </div>

                                                    <div class="input-group" ng-show="composit['value']=='nil'">
                                                        <input type="text" name="headervalue"
                                                               value="{{resource['intercept']['intercept_operationLogApp_new']['value_default']}}"
                                                               class="form-control"
                                                               disabled>
                                                    </div>

                                                </div>
                                                <div class="col-md-1">
                                                    <label class="cr-styled desc"
                                                           ng-show="composit.function=='=' || composit.function=='!='">
                                                        <input type="checkbox" ng-checked="composit['value']=='nil'"
                                                               ng-click="checkNull(composit)"/>
                                                        <i class="fa"></i>
                                                        {{resource['intercept']['intercept_operationLogApp_new']['value_set_default']}}
                                                    </label>
                                                </div>
                                                <div class="col-md-1">
                                                    <a title="delete" ng-show="showDeleteComposite()"
                                                       ng-click="deleteRow($index,'header')"
                                                       class="fa fa-times-circle-o delete status-red"
                                                       aria-hidden="true"></a>
                                                </div>
                                                <div class="col-md-1">
                                                    <div class="status-red unit"
                                                         ng-show="!composit.key || !composit.value">
                                                        {{resource['intercept']['required']}}
                                                    </div>
                                                    <div class="status-red unit"
                                                         ng-show="isKeyValid(composit.key)">
                                                        {{resource['intercept']['illegal']}}
                                                    </div>
                                                </div>

                                            </div>
                                            <div class="row" style="padding-top: 10px"
                                                 data-ng-repeat="composit in condition.composit['countheader']">
                                                <div class="col-md-1">
                                                    <span class="desc">{{resource['intercept']['intercept_operationLogApp_new']['header_count']}}<i
                                                            ng-click="getHelpLink('countheader')"
                                                            class="fa fa-question-circle"></i></span>
                                                </div>
                                                <div class="col-md-2">
                                                    <select class="form-control"
                                                            ng-change="changeFunction(composit,'count')"
                                                            data-ng-model="composit.function">
                                                        <option value="=" selected>=</option>
                                                        <option value="!=">!=</option>
                                                        <option value=">">&gt;</option>
                                                        <option value="<">&lt;</option>
                                                    </select>
                                                </div>

                                                <div class="col-md-7">
                                                    <div>
                                                        <input type="number" name="headercount"
                                                               class="form-control pull-left" placeholder=""
                                                               ng-model="composit.count"
                                                               required>
                                                    </div>
                                                </div>
                                                <div class="col-md-1">
                                                    <a ng-show="showDeleteComposite()" title="delete"
                                                       ng-click="deleteRow($index,'countheader')"
                                                       class="fa fa-times-circle-o delete status-red"
                                                       aria-hidden="true"></a>
                                                </div>

                                                <div class="col-md-1">
                                                    <div class="status-red unit"
                                                         ng-show="!composit.count || composit.count<0">
                                                        {{resource['intercept']['intercept_operationLogApp_new']['greater-than-zero']}}
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row" style="padding-top: 10px"
                                                 data-ng-repeat="composit in condition.composit['cookie']">
                                                <div class="col-md-1">
                                                    <span class="desc">Cookie<i ng-click="getHelpLink('cookie')"
                                                                                class="fa fa-question-circle"
                                                                                title=""></i></span>
                                                </div>
                                                <div class="col-md-2">
                                                    <div class="input-group">
                                                        <span class="input-group-addon">{{resource['intercept']['intercept_operationLogApp_new']['label_key']}}</span>
                                                        <input type="text" name="cookiekey"
                                                               class="form-control" placeholder=""
                                                               data-ng-model="composit['key']"
                                                               required>
                                                    </div>
                                                </div>
                                                <div class="col-md-2">
                                                    <select class="form-control"
                                                            ng-change="changeFunction(composit,'value')"
                                                            data-ng-model="composit.function">
                                                        <option value="=" selected>=</option>
                                                        <option value="!=">!=</option>
                                                        <option value="~">
                                                            {{resource['intercept']['intercept_operationLogApp_new']["reg-equal"]}}
                                                        </option>
                                                        <option value="~*">
                                                            {{resource['intercept']['intercept_operationLogApp_new']["reg-equal-case-insensitive"]}}
                                                        </option>
                                                        <option value="!~">
                                                            {{resource['intercept']['intercept_operationLogApp_new']["reg-not-equal"]}}
                                                        </option>
                                                        <option value="!~*">
                                                            {{resource['intercept']['intercept_operationLogApp_new']["reg-not-equal-case-insensitive"]}}
                                                        </option>
                                                    </select>
                                                </div>

                                                <div class="col-md-4">
                                                    <div class="input-group" ng-show="composit['value']!='nil'">
                                                        <span class="input-group-addon">{{resource['intercept']['intercept_operationLogApp_new']['label_value']}}</span>
                                                        <input type="text" name="cookievalue"
                                                               class="form-control" placeholder=""
                                                               data-ng-model="composit['value']"
                                                               required>
                                                    </div>

                                                    <div class="input-group" ng-show="composit['value']=='nil'">
                                                        <input type="text" name="cookievalue"
                                                               value="{{resource['intercept']['intercept_operationLogApp_new']['value_default']}}"
                                                               class="form-control"
                                                               disabled>
                                                    </div>
                                                </div>

                                                <div class="col-md-1">
                                                    <label class="cr-styled desc"
                                                           ng-show="composit.function=='=' || composit.function=='!='">
                                                        <input type="checkbox" ng-checked="composit['value']=='nil'"
                                                               ng-click="checkNull(composit)"/>
                                                        <i class="fa"></i>
                                                        {{resource['intercept']['intercept_operationLogApp_new']['value_set_default']}}
                                                    </label>
                                                </div>

                                                <div class="col-md-1">
                                                    <a title="delete" ng-show="showDeleteComposite()"
                                                       ng-click="deleteRow($index,'cookie')"
                                                       class="fa fa-times-circle-o delete status-red"
                                                       aria-hidden="true"></a>
                                                </div>

                                                <div class="col-md-1">
                                                    <div class="status-red unit"
                                                         ng-show="!composit.key || !composit.value">
                                                        {{resource['intercept']['required']}}
                                                    </div>
                                                    <div class="status-red unit"
                                                         ng-show="isKeyValid(composit.key)">
                                                        {{resource['intercept']['illegal']}}
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row" style="padding-top: 10px"
                                                 data-ng-repeat="composit in condition.composit['countcookie']">
                                                <div class="col-md-1">
                                                    <span class="desc">{{resource['intercept']['intercept_operationLogApp_new']['cookie_count']}}<i
                                                            ng-click="getHelpLink('countcookie')"
                                                            class="fa fa-question-circle"
                                                            title=""></i></span>
                                                </div>
                                                <div class="col-md-2">
                                                    <select class="form-control"
                                                            ng-change="changeFunction(composit,'count')"
                                                            data-ng-model="composit.function">
                                                        <option value="=" selected>=</option>
                                                        <option value="!=">!=</option>
                                                        <option value=">">&gt;</option>
                                                        <option value="<">&lt;</option>
                                                    </select>
                                                </div>

                                                <div class="col-md-7">
                                                    <div>
                                                        <input type="number" name="cookiecount"
                                                               class="form-control pull-left" placeholder=""
                                                               ng-model="composit.count"
                                                               required>
                                                    </div>
                                                </div>

                                                <div class="col-md-1">
                                                    <a title="delete"
                                                       ng-click="deleteRow($index,'countcookie')"
                                                       class="fa fa-times-circle-o delete status-red"
                                                       aria-hidden="true" ng-show="showDeleteComposite()"></a>
                                                </div>

                                                <div class="col-md-1">
                                                    <div class="status-red unit"
                                                         ng-show="!composit.count || composit.count<0">
                                                        {{resource['intercept']['intercept_operationLogApp_new']['greater-than-zero']}}
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row" style="padding-top: 10px"
                                                 data-ng-repeat="composit in condition.composit['uri']">
                                                <div class="col-md-1">
                                                    <span class="desc">{{resource['intercept']['intercept_operationLogApp_new']['uri_noparam']}}<i
                                                            ng-click="getHelpLink('uri')"
                                                            class="fa fa-question-circle"
                                                            title=""></i></span>
                                                </div>
                                                <div class="col-md-2">
                                                    <select class="form-control"
                                                            ng-change="changeFunction(composit,'value')"
                                                            data-ng-model="composit.function">
                                                        <option value="=" selected>=</option>
                                                        <option value="!=">!=</option>
                                                        <option value="~">
                                                            {{resource['intercept']['intercept_operationLogApp_new']["reg-equal"]}}
                                                        </option>
                                                        <option value="~*">
                                                            {{resource['intercept']['intercept_operationLogApp_new']["reg-equal-case-insensitive"]}}
                                                        </option>
                                                        <option value="!~">
                                                            {{resource['intercept']['intercept_operationLogApp_new']["reg-not-equal"]}}
                                                        </option>
                                                        <option value="!~*">
                                                            {{resource['intercept']['intercept_operationLogApp_new']["reg-not-equal-case-insensitive"]}}
                                                        </option>
                                                    </select>
                                                </div>

                                                <div class="col-md-7">
                                                    <div>
                                                        <input type="text" name="uri"
                                                               class="form-control pull-left" placeholder=""
                                                               ng-model="composit.value"
                                                               required>
                                                    </div>
                                                </div>

                                                <div class="col-md-1">
                                                    <a title="delete"
                                                       ng-click="deleteRow($index,'uri')"
                                                       class="fa fa-times-circle-o delete status-red"
                                                       aria-hidden="true" ng-show="showDeleteComposite()"></a>
                                                </div>

                                                <div class="col-md-1">
                                                    <div class="status-red unit"
                                                         ng-show="!composit.value">
                                                        {{resource['intercept']['required']}}
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row" style="padding-top: 10px"
                                                 data-ng-repeat="composit in condition.composit['url']">
                                                <div class="col-md-1">
                                                    <span class="desc">{{resource['intercept']['intercept_operationLogApp_new']['uri_param']}}<i
                                                            ng-click="getHelpLink('url')"
                                                            class="fa fa-question-circle"
                                                            title=""></i></span>
                                                </div>
                                                <div class="col-md-2">
                                                    <select class="form-control"
                                                            ng-change="changeFunction(composit,'value')"
                                                            data-ng-model="composit.function">
                                                        <option value="=" selected>=</option>
                                                        <option value="!=">!=</option>
                                                        <option value="~">
                                                            {{resource['intercept']['intercept_operationLogApp_new']["reg-equal"]}}
                                                        </option>
                                                        <option value="~*">
                                                            {{resource['intercept']['intercept_operationLogApp_new']["reg-equal-case-insensitive"]}}
                                                        </option>
                                                        <option value="!~">
                                                            {{resource['intercept']['intercept_operationLogApp_new']["reg-not-equal"]}}
                                                        </option>
                                                        <option value="!~*">
                                                            {{resource['intercept']['intercept_operationLogApp_new']["reg-not-equal-case-insensitive"]}}
                                                        </option>
                                                    </select>
                                                </div>

                                                <div class="col-md-7">
                                                    <div>
                                                        <input type="text" name="url"
                                                               class="form-control pull-left" placeholder=""
                                                               ng-model="composit.value"
                                                               required>
                                                    </div>
                                                </div>

                                                <div class="col-md-1">
                                                    <a title="delete"
                                                       ng-click="deleteRow($index,'url')"
                                                       class="fa fa-times-circle-o delete status-red"
                                                       aria-hidden="true" ng-show="showDeleteComposite()"></a>
                                                </div>

                                                <div class="col-md-1">
                                                    <div class="status-red unit"
                                                         ng-show="!composit.value">
                                                        {{resource['intercept']['required']}}
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row" style="padding-top: 10px"
                                                 data-ng-repeat="composit in condition.composit['arg']">
                                                <div class="col-md-1">
                                                    <span class="desc">{{resource['intercept']['intercept_operationLogApp_new']['request_param']}}<i
                                                            ng-click="getHelpLink('arg')"
                                                            class="fa fa-question-circle"
                                                            title="满足条件的请求参数键值对"></i></span>
                                                </div>
                                                <div class="col-md-2">
                                                    <div class="input-group">
                                                        <span class="input-group-addon">{{resource['intercept']['intercept_operationLogApp_new']['label_key']}}</span>
                                                        <input type="text" name="paramkey"
                                                               class="form-control" placeholder=""
                                                               data-ng-model="composit['key']"
                                                               required>
                                                    </div>
                                                </div>
                                                <div class="col-md-2">
                                                    <select class="form-control"
                                                            ng-change="changeFunction(composit,'value')"
                                                            data-ng-model="composit.function">
                                                        <option value="=" selected>=</option>
                                                        <option value="!=">!=</option>
                                                        <option value="~">
                                                            {{resource['intercept']['intercept_operationLogApp_new']["reg-equal"]}}
                                                        </option>
                                                        <option value="~*">
                                                            {{resource['intercept']['intercept_operationLogApp_new']["reg-equal-case-insensitive"]}}
                                                        </option>
                                                        <option value="!~">
                                                            {{resource['intercept']['intercept_operationLogApp_new']["reg-not-equal"]}}
                                                        </option>
                                                        <option value="!~*">
                                                            {{resource['intercept']['intercept_operationLogApp_new']["reg-not-equal-case-insensitive"]}}
                                                        </option>
                                                    </select>
                                                </div>

                                                <div class="col-md-4">
                                                    <div class="input-group" ng-show="composit['value']!='nil'">
                                                        <span class="input-group-addon">{{resource['intercept']['intercept_operationLogApp_new']['label_value']}}</span>
                                                        <input type="text" name="paramvalue"
                                                               class="form-control" placeholder=""
                                                               data-ng-model="composit['value']"
                                                               required>
                                                    </div>

                                                    <div class="input-group" ng-show="composit['value']=='nil'">
                                                        <input type="text" name="paramvalue"
                                                               value="{{resource['intercept']['intercept_operationLogApp_new']['value_default']}}"
                                                               class="form-control"
                                                               disabled>
                                                    </div>

                                                </div>

                                                <div class="col-md-1">
                                                    <label class="cr-styled desc"
                                                           ng-show="composit.function=='=' || composit.function=='!='">
                                                        <input type="checkbox" ng-checked="composit['value']=='nil'"
                                                               ng-click="checkNull(composit)"/>
                                                        <i class="fa"></i>
                                                        {{resource['intercept']['intercept_operationLogApp_new']['value_set_default']}}
                                                    </label>
                                                </div>

                                                <div class="col-md-1">
                                                    <a ng-show="showDeleteComposite()" title="delete"
                                                       ng-click="deleteRow($index,'arg')"
                                                       class="fa fa-times-circle-o delete status-red"
                                                       aria-hidden="true"></a>
                                                </div>


                                                <div class="col-md-1">
                                                    <div class="status-red unit"
                                                         ng-show="!composit.key || !composit.value">
                                                        {{resource['intercept']['required']}}
                                                    </div>
                                                    <div class="status-red unit"
                                                         ng-show="isKeyValid(composit.key)">
                                                        {{resource['intercept']['illegal']}}
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row" style="padding-top: 10px"
                                                 data-ng-repeat="composit in condition.composit['cip']">
                                                <div class="col-md-1">
                                                    <span class="desc">{{resource['intercept']['intercept_operationLogApp_new']['request_ip']}}<i
                                                            ng-click="getHelpLink('cip')"
                                                            class="fa fa-question-circle"
                                                            title=""></i></span>
                                                </div>
                                                <div class="col-md-2">
                                                    <select class="form-control"
                                                            ng-change="changeFunction(composit,'ip')"
                                                            data-ng-model="composit.function">
                                                        <option value="=" selected>=</option>
                                                        <option value="!=">!=</option>
                                                        <option value="~">
                                                            {{resource['intercept']['intercept_operationLogApp_new']["reg-equal"]}}
                                                        </option>
                                                        <option value="!~">
                                                            {{resource['intercept']['intercept_operationLogApp_new']["reg-not-equal"]}}
                                                        </option>
                                                    </select>
                                                </div>
                                                <div class="col-md-7">
                                                    <input type="text" name="ipkey"
                                                           class="form-control" placeholder=""
                                                           data-ng-model="composit['ip']"
                                                           required>
                                                </div>

                                                <div class="col-md-1">
                                                    <a ng-show="showDeleteComposite()" title="delete"
                                                       ng-click="deleteRow($index,'cip')"
                                                       class="fa fa-times-circle-o delete status-red"
                                                       aria-hidden="true"></a>
                                                </div>

                                                <div class="col-md-1">
                                                    <div class="status-red unit"
                                                         ng-show="!composit.ip">{{resource['intercept']['required']}}
                                                    </div>
                                                    <div class="status-red unit"
                                                         ng-show="isIpValid(composit.function, composit['ip'])">
                                                        {{resource['intercept']['ipillegal']}}
                                                    </div>
                                                </div>

                                                <div class="col-md-12">
                                                    <span class="pull-right"
                                                          ng-bind-html='resource["intercept"]["intercept_operationLogApp_new"]["ip_tool_tip"]'>
                                                    </span>
                                                </div>
                                            </div>

                                            <div class="row" style="padding-top: 10px"
                                                 data-ng-repeat="composit in condition.composit['method']">
                                                <div class="col-md-1">
                                                    <span class="desc">{{resource['intercept']['intercept_operationLogApp_new']['method_param']}}<i
                                                            ng-click="getHelpLink('method')"
                                                            class="fa fa-question-circle"
                                                            title=""></i></span>
                                                </div>
                                                <div class="col-md-2">
                                                    <select class="form-control"
                                                            ng-change="changeFunction(composit, 'ip')"
                                                            data-ng-model="composit.function">
                                                        <option value="=" selected>=</option>
                                                        <option value="!=">!=</option>
                                                    </select>
                                                </div>
                                                <div class="col-md-7">
                                                    <select class="form-control"
                                                            data-ng-model="composit.method">
                                                        <option value="GET" selected>GET</option>
                                                        <option value="POST">POST</option>
                                                        <option value="PUT">PUT</option>
                                                        <option value="HEAD">HEAD</option>
                                                        <option value="DELETE">DELETE</option>
                                                        <option value="OPTIONS">OPTIONS</option>
                                                        <option value="TRACE">TRACE</option>
                                                        <option value="CONNECT">CONNECT</option>
                                                    </select>
                                                </div>

                                                <div class="col-md-1">
                                                    <a ng-show="showDeleteComposite()" title="delete"
                                                       ng-click="deleteRow($index,'method')"
                                                       class="fa fa-times-circle-o delete status-red"
                                                       aria-hidden="true"></a>
                                                </div>

                                                <div class="col-md-1">
                                                    <div class="status-red unit"
                                                         ng-show="!composit.method">
                                                        {{resource['intercept']['required']}}
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row"
                                                 ng-show="showEmptyConitionMsg()">
                                                <div class="col-md-12" style="text-align: center">
                                                    <i>{{resource['intercept']['nocondition']}}</i>
                                                </div>
                                            </div>
                                            <div class="row " style="padding-top: 10px"
                                                 ng-show="showConditionJoin()">
                                                <div class="col-md-1">
                                                    {{resource['intercept']['intercept_operationLogApp_new']['condition_relation']}}
                                                </div>
                                                <div class="col-md-10">
                                                            <span style="padding: 3px"
                                                                  class="label-tag label label-default"
                                                                  ng-class="isSelectedRelation(k,v)"
                                                                  data-ng-repeat="(k,v) in relations"
                                                                  ng-click="toggleRelation(k,v)">
                                                                {{k}}
                                                             </span>
                                                </div>
                                                <div class="col-md-1 status-red" ng-show="!condition.type">
                                                    <span style="line-height: 10px; margin-left: -10px">{{resource['intercept']['required']}}</span>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="split-line col-md-12">

                                                </div>
                                            </div>
                                            <div class="row" style="padding-top: 10px;">
                                                <div class="col-md-1">
                                                            <span class="desc" ng-show="showConditionActionText()">
                                                                 {{resource['intercept']['intercept_operationLogApp_new']['resolution']}}
                                                                                                                    <i ng-click="getHelpLink('action')"
                                                                                                                       class="fa fa-question-circle"
                                                                                                                       title=""></i>
                                                            </span>

                                                </div>
                                                <div class="col-md-2">
                                                    <span type="text" class="desc"
                                                          ng-show="showConditionActionText()">
                                                        <span>
                                                        {{getConditionActionText()}}
                                                    </span>
                                                        <!--<i style="margin-left: 5px" ng-click="showHelpMsg()"-->
                                                        <!--class="fa fa-question-circle"></i>-->
                                                    </span>
                                                </div>
                                                <div class="col-md-9">
                                                    <div class="btn-group pull-right">
                                                        <button type="button"
                                                                class="btn btn-info btn-sm dropdown-toggle "
                                                                data-toggle="dropdown" aria-expanded="true"><i
                                                                class="fa fa-plus"></i>{{resource['intercept']['intercept_operationLogApp_new']['new_resolution']}}
                                                        </button>
                                                        <ul class="dropdown-menu" role="menu">
                                                            <li><a ng-click="newActionClick('reject')">{{resource['intercept']['intercept_operationLogApp_new']['resolutionmap']['refuse']}}</a>
                                                            </li>
                                                            <li><a ng-click="newActionClick('flag')">{{resource['intercept']['intercept_operationLogApp_new']['resolutionmap']['mark']}}</a>
                                                            </li>
                                                            <li><a ng-click="newActionClick('redirect')">{{resource['intercept']['intercept_operationLogApp_new']['resolutionmap']['redirect']}}</a>
                                                            </li>
                                                            <li><a ng-click="newActionClick('proxypass')">{{resource['intercept']['intercept_operationLogApp_new']['resolutionmap']['response']}}</a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                            <div style="padding-top:10px" class="action"
                                                 ng-show="condition.action.type=='reject'">
                                                <div class="row">
                                                    <div class="col-md-1">
                                                        <span class="desc">{{resource['intercept']['intercept_operationLogApp_new']['returncode']}}</span>
                                                    </div>
                                                    <div class="col-md-1">
                                                        <select class="form-control"
                                                                data-ng-model="condition.action['code']">
                                                            <option value="433" selected>433</option>
                                                        </select>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-md-1">
                                                        <span class="desc">{{resource['intercept']['intercept_operationLogApp_new']['error_message']}}</span>
                                                    </div>
                                                    <div class="col-md-10">
                                                        <textarea name="rejectmessage"
                                                                  class="form-control"
                                                                  placeholder="{{resource['intercept']['intercept_operationLogApp_new']['error_message_placeholder']}}"
                                                                  data-ng-model="condition.action['message']">
                                                        </textarea>

                                                    </div>
                                                    <div class="col-md-1 status-red"
                                                         ng-show="!condition.action['message']">
                                                        <span class="unit">{{resource['intercept']['required']}}</span>
                                                    </div>
                                                </div>

                                            </div>
                                            <div style="padding-top:10px" class="action"
                                                 ng-show="condition.action.type=='flag'">

                                                <div class="row"
                                                     data-ng-repeat="header in condition.action.headers">
                                                    <div class="col-md-1">
                                                            <span class="desc">
                                                                {{resource['intercept']['intercept_operationLogApp_new']['new_header']}}
                                                            </span>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">{{resource['intercept']['intercept_operationLogApp_new']['label_key']}}</span>
                                                            <input type="text" name="headerkey"
                                                                   class="form-control " placeholder=""
                                                                   data-ng-model="header['key']" required>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6">
                                                        <div class="input-group">
                                                            <span class="input-group-addon">{{resource['intercept']['intercept_operationLogApp_new']['label_value']}}</span>
                                                            <input type="text" name="headervalue"
                                                                   class="form-control " placeholder=""
                                                                   data-ng-model="header['value']" required>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-2">
                                                        <a title="add" ng-show="showAddHeaderBt($index)"
                                                           ng-click="addHeaderRow()"
                                                           class="fa fa-plus-circle delete status-green"
                                                           aria-hidden="true"></a>
                                                        <a title="delete" ng-show="showRemoveHeaderBt($index)"
                                                           ng-click="deleteHeaderRow()"
                                                           class="fa fa-times-circle-o delete status-red"
                                                           aria-hidden="true"></a>
                                                    </div>

                                                    <div class="col-md-1 status-red">
                                                        <span class="unit" ng-show="!header['key'] || !header['value']">{{resource['intercept']['required']}}</span>

                                                        <span class="unit"
                                                              ng-show="isKeyValid(header['key'])">{{resource['intercept']['illegal']}}
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div style="padding-top:10px" class="action"
                                                 ng-show="condition.action.type=='redirect'">
                                                <div class="row">
                                                    <div class="col-md-1">
                                                            <span class="desc">
                                                                 {{resource['intercept']['intercept_operationLogApp_new']['new_header_code']}}
                                                            </span>
                                                    </div>

                                                    <div class="col-md-1">
                                                        <select class="form-control"
                                                                data-ng-model="condition.action['code']">
                                                            <option value="301" selected>301</option>
                                                            <option value="302">302</option>
                                                        </select>
                                                    </div>
                                                </div>


                                                <div class="row">
                                                    <div class="col-md-1">
                                                            <span class="desc">
                                                                 {{resource['intercept']['intercept_operationLogApp_new']['redirect_address']}}
                                                            </span>
                                                    </div>
                                                    <div class="col-md-10">
                                                            <textarea name="target"
                                                                      class="form-control"
                                                                      placeholder="{{resource['intercept']['intercept_operationLogApp_new']['redirect_address_placeholder']}}"
                                                                      data-ng-model="condition.action['target']"
                                                                      required>
                                                            </textarea>
                                                    </div>
                                                    <div class="col-md-1 status-red"
                                                         ng-show="!condition.action['target']">
                                                        <span class="unit">{{resource['intercept']['required']}}</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div style="padding-top:10px" class=""
                                                 ng-show="condition.action.type=='proxypass'">
                                                <div class="row">
                                                    <div class="col-md-1">
                                                            <span class="desc">
                                                                {{resource['intercept']['intercept_operationLogApp_new']['response_address']}}
                                                            </span>
                                                    </div>
                                                    <div class="col-md-10">
                                                            <textarea name="targeturl"
                                                                      class="form-control"
                                                                      placeholder="{{resource['intercept']['intercept_operationLogApp_new']['response_address_placeholder']}}"
                                                                      data-ng-model="condition.action['target']"
                                                                      required>
                                                            </textarea>
                                                    </div>
                                                    <div class="col-md-1 status-red"
                                                         ng-show="!condition.action['target']">
                                                        <span class="unit">{{resource['intercept']['required']}}</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div style="padding-top:10px" class="row"
                                                 ng-show="showConditionActionError()">
                                                <div class="col-md-12" style="text-align: center">
                                                    <i>{{resource['intercept']['noaction']}}</i>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-info" ng-click="saveCondition()"
                                        ng-disabled="disableAddCondition()"
                                        data-dismiss="modal">
                                    <i class="fa fa-check"></i>{{resource['intercept']['save']}}
                                </button>

                                <button type="button" class="btn btn-warning"
                                        data-dismiss="modal">{{resource['intercept']['close']}}
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal fade" id="operationConfrimModel" role="dialog">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title">{{resource['intercept']['operation_confirm']['title']}}</h4>
                            </div>
                            <div class="modal-body">
                                <div ng-if="query.saveResult==true" class="status-green">
                                    {{resource['intercept']['operation_confirm']['revert_success']}} <i
                                        class="fa fa-check" style="padding-left: 10px"></i>
                                </div>

                                <div ng-if="query.saveResult['code']"
                                     class="status-red">
                                    {{resource['intercept']['operation_confirm']['revert_fail']}} <i class="fa fa-times"
                                                                                                     style="padding-left: 10px"></i>.
                                    {{resource['intercept']['operation_confirm']['reason']}}:
                                    {{query.saveResult['message']}}
                                </div>
                            </div>
                            <span class="timerspan"></span>

                            <div class="modal-footer">
                                <button type="button" class="btn btn-warning forceUpdateBt"
                                        ng-show="showForceUpdate"
                                        ng-click="forceActivateGroup()">
                                    {{resource['intercept']['operation_confirm']['force']}}
                                </button>

                                <button type="button" class="btn btn-info closeProgressWindowBt"
                                        data-dismiss="modal">
                                    {{resource['intercept']['operation_confirm']['close']}}
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</section>
<div class="modal fade" id="questionModal" role="dialog" ng-app="questionModalApp" ng-controller="questionModalCtrl">
    <div class="modal-dialog">         <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">{{resource.languageApp.languageController.feedback}}</h4></div>
            <div class="modal-body">
                <div class="tips warning-important"></div>
                <div class="form-group">
                    <div class=""><i class="fa fa-lightbulb-o" style="font-size: 20px"></i> <span class="op-bar">{{resource.questionModal.token1}}</span>
                    </div>
                    <div class="system-padding-top"><textarea cols="2" rows="10" style="width: 100%"

                                                              id="comment-text"
                                                              placeholder="{{resource.questionModal.token2}}"></textarea>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-info" id="submmit-question" data-dismiss="modal">
                    {{resource.userHome.html.modal.msg1}}
                </button>
                <button type="button" class="btn btn-warning deny-operator" data-dismiss="modal">
                    {{resource.userHome.html.modal.msg2}}
                </button>
            </div>
        </div>
        <input type="hidden" value="" class="status-hidden"/> <input type="hidden" value="" class="op-hidden"/> <input
                type="hidden" value="" class="ip-hidden"/></div>
</div>
</body>
<link href="/static/lib/velonic-admin/assets/sweet-alert/sweet-alert.min.css" rel="stylesheet">
<script src="/static/lib/velonic-admin/assets/sweet-alert/sweet-alert.min.js"></script>
<script src="/static/lib/angular/angular-cookies.js"></script>
<script src="/static/js/http-auth-interceptor.js"></script>
<script src="/static/lib/angular/angular-sanitize.js"></script>
<script src="/static/lib/angular-autocomplete/angucomplete-alt.min.js"></script>
<link rel="stylesheet" href="/static/lib/angular-autocomplete/angucomplete-alt.css">

<script src="/static/lib/angular-ui-bootstrap/ui-bootstrap-tpls-2.0.0.js"></script>
<script src="/static/lib/bootstrap-ui-datetime-picker/datetime-picker.js"></script>
<script src="/static/lib/jquery/jquery-dateFormat.js"></script>
<script src="/static/lib/echarts3.2.2/echarts.min.js"></script>
<!--Include Bootstrap-Table-->
<script src="/static/lib/bootstrap-table/bootstrap-table.js"></script>
<script src="/static/lib/bootstrap-table/bootstrap-table-zh-CN.js"></script>
<script src="/static/lib/bootstrap-table/bootstrap-table-editable.js"></script>
<script src="/static/lib/bootstrap-table/bootstrap-editable.js"></script>
<script src="/static/lib/bootstrap-notify/bootstrap-notify.min.js"></script>
<!--For diff patch-->
<script src="/static/lib/diff-match-patch/difflib.js"></script>
<script src="/static/lib/diff-match-patch/diffview.js"></script>
<script src="/static/lib/underscore/underscore-min.js"></script>
<script src="/static/lib/encoder/gbk.js"></script>
<script src="/static/js/global.js"></script>
<script src="/static/js/slb-intercept-rule.js"></script>
</html>